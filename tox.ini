[pytest]
addopts = --reuse-db --nomigrations
DJANGO_SETTINGS_MODULE = tests.settings.test
django_find_project = false

[flake8]
exclude = *migrations/*

[tox]
envlist =
    py27-django{16,17,18,master},
    flake8,
    docs

[testenv]
passenv = DB_*
deps =
    django16: Django==1.6
    django17: Django==1.7
    django18: Django==1.8
    djangomaster: https://github.com/django/django/archive/master.tar.gz
    -rrequirements/requirements-test.txt
    -rrequirements/requirements-common.txt
commands = ./runtests.py {posargs} --nolint

[testenv:flake8]
deps =
    -rrequirements/requirements-codestyle.txt
    -rrequirements/requirements-test.txt
commands = ./runtests.py --lintonly

[testenv:docs]
deps = Sphinx==1.2
changedir = docs
commands = {envbindir}/sphinx-build -W -b html . {envtmpdir}/html
